{% extends "lyrical/base_columns.html" %}
{% load static %}

{% block head %}
{% endblock %}

{% block page_content %}
    <div class="w-full min-h-screen flex flex-col items-center justify-top bg-base-200 p-4 m-8">
        <div class="card max-w-[100%] h-[85%] bg-base-100 shadow-xl p-6 flex flex-col">

            <!-- Title -->
            <h2 class="mb-6 text-3xl font-bold text-primary text-center flex-shrink-0">SONG HOOK - {{song.name|upper}}</h2>

            <!-- Content -->
            <div class="flex flex-row flex-1 min-h-0 gap-4">

                <!-- Left Panel -->
                <div class="w-[550px] min-w-0 border-1 rounded border-base-300 flex flex-col h-full pt-1">

                    <!-- Edit Song Hook Section -->
                    <c-panel-header title="EDIT YOUR SONG HOOK" padding="4">
                        <c-panel-header-button id="btn-cancel" extrastyles="btn-disabled">
                            CANCEL
                        </c-panel-header-button>
                        <c-panel-header-button id="btn-save" extrastyles="btn-disabled">
                            SAVE
                        </c-panel-header-button>
                    </c-panel-header>
                    <!-- End: Edit Song Hook Section -->

                    <!-- Fields for Edit Song Hook -->
                    <div class="mt-1 mx-1 card border border-base-300 bg-base-200" data-drop-zone="true">
                       
                        <!-- Hook -->
                        <c-badge extrastyles="ml-6">hook</c-badge>
                        <div class="flex flex-col">
                            <textarea 
                                id="hook-text" 
                                type="text" 
                                placeholder="drag-drop a generated hook here..." 
                                autocomplete="off" 
                                class="input-control textarea text-[16px] textarea-neutral w-full resize-none border-none shadow-none focus:outline-none"
                                style="field-sizing: content;"
                            >{{song.hook}}</textarea>
                        </div>
                        <!-- End: Hook -->

                    </div>
                    <!-- End: Fields for Edit Song Hook -->

                    <!-- Parameters Header -->
                    <c-panel-header title="PARAMETERS" padding="4" extrastyles="border-t mt-1 pt-1">
                        <c-panel-header-button id="btn-generate" extrastyles="w-38 h-7.5" data-song-id="{{song.id}}">
                            GENERATE
                        </c-panel-header-button>
                        <c-panel-header-button-loading id="btn-generating" extrastyles="w-38 h-7.5">
                            PLEASE WAIT...
                        </c-panel-header-button-loading>
                    </c-panel-header>
                    <!-- End: Parameters Header -->

                    <!-- Prompt Input -->
                    <div class="flex flex-col flex-shrink-0 border-b border-base-300 h-25">
                        <textarea 
                            id="prompt-text" 
                            type="text" 
                            placeholder="add an optional prompt or just click generate..." 
                            autocomplete="off" 
                            class="input-control textarea text-[16px] textarea-neutral w-full h-full px-4 mb-1 resize-none border-none shadow-none focus:outline-none"
                        >{{custom_request}}</textarea>
                    </div>
                    <!-- End: Prompt Input -->

                    <!-- Song Structure Controls -->
                    <div class="p-4 mb-2">

                        <c-input-label>RHYME WITH:</c-input-label>
                        <input
                            id="rhyme-with" 
                            type="text" 
                            placeholder="" 
                            autocomplete="off" 
                            class="input-control input input-md input-neutral w-[100%] border-base-300 shadow-none focus:outline-none" 
                            value="{{rhyme_with}}"
                        ></input>

                        <c-input-gap />
                        <c-input-label>VOCALISATION LEVEL:</c-input-label>
                        <div class="w-full max-w-xs">
                            <input id="vocalisation-level" type="range" min="0" max="3" value="{{vocalisation_level}}" class="range range-primary w-130" step="1"/>
                            <div class="flex justify-between px-1 mt-2 text-xs w-130">
                                <span>Off</span>
                                <span>Low</span>
                                <span>Medium</span>
                                <span>High</span>
                            </div>
                        </div>

                        <c-input-gap />
                        <c-input-label>VOCALISATION TERMS:</c-input-label>
                        <input
                            id="vocalisation-terms" 
                            type="text" 
                            placeholder="" 
                            autocomplete="off" 
                            class="input-control input input-md input-neutral w-[100%] border-base-300 shadow-none focus:outline-none" 
                            value="{{vocalisation_terms}}"
                        ></input>

                        <c-input-gap />
                        <c-input-label>MAX HOOK LINES:</c-input-label>
                        <div class="w-full max-w-xs">
                            <input id="max-hook-lines" type="range" min="1" max="4" value="{{max_lines}}" class="range range-primary w-130" step="1"/>
                            <div class="flex justify-between px-2.5 mt-2 text-xs w-132">
                                <span>1</span>
                                <span>2</span>
                                <span>3</span>
                                <span>4</span>
                            </div>
                        </div>

                        <c-input-gap />
                        <c-input-label>AVG SYLLABLES PER LINE:</c-input-label>
                        <div class="w-full max-w-xs">
                            <input id="max-syllables-per-line" type="range" min="3" max="15" value="{{average_syllables}}" class="range range-primary w-130" step="1"/>
                            <div class="flex justify-between px-2.5 mt-2 text-xs w-132">
                                <span>3</span>
                                <span>6</span>
                                <span>9</span>
                                <span>12</span>
                                <span>15</span>
                            </div>
                        </div>

                    </div>
                    <!-- End: Song Structure Controls -->

                    <!-- Spare Space -->
                    <div class="flex-1 border-t border-base-300">
                    </div>
                    <!-- End: Spare Space -->

                </div>
                <!-- End: Left Panel -->


                <!-- Right Panel -->
                <div class="w-[550px] min-w-0 border-1 rounded border-base-300 flex flex-col h-full pt-1 overflow-hidden">

                    <!-- Splitter Section -->
                    <div class="flex flex-col flex-shrink-0">
                        <div class="card w-full bg-transparent border-b border-base-300 rounded-none flex flex-row cursor-row-resize font-bold text-md text-primary">
                            <div class="flex flex-0 justify-end items-center flex-1 pr-4">                
                                
                                <!-- Tabs Group -->
                                <div class="flex flex-1 justify-start items-center ">
                                    <div class="tabs tabs-border tabs-md mr-1">
                                        <input type="radio" name="tab-group-filter" id="tab-filter-hooks" class="tab px-4" aria-label="HOOKS" checked="checked" />
                                    </div>
                                </div>
                                <!-- End: Tabs Group -->

                                <!-- Clear Button -->
                                <c-panel-header-button id="btn-clear" extrastyles="btn-disabled">
                                    CLEAR
                                </c-panel-header-button>
                                <!-- End: Clear Button -->      

                            </div>
                        </div>
                    </div>
                    <!-- End: Splitter Section -->
                    
                    <!-- Container for Generated Hooks -->
                    <div class="flex flex-col flex-1 px-1 min-h-0 overflow-y-auto" id="generated-hooks">
                        {% for section in song_sections %}
                            {% if not section.hidden %}
                                <c-card-style />
                            {% endif %}
                        {% endfor %}
                    </div>
                    <!-- End: Container for Generated Hooks -->

                </div>
                <!-- End: Right Panel -->

            </div>                
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script type="module" src="{% static 'lyrical/script/page_hook.js' %}"></script>
{% endblock %}
