{% extends "lyrical/base.html" %}
{% load static %}

{% block body %}
    <!-- The modal dialogs -->
    <c-modal-delete />
    <c-modal-textinput />
    <c-toast-template />
    
    <div id="song-edit-container" class="flex h-screen w-screen overflow-hidden">

        <!-- Fixed width sidebar -->
        <div id="sidebar-panel" class="w-64 flex-shrink-0 flex justify-center items-center overflow-hidden">
            <div class="h-full w-full flex items-center justify-center">
                <div class="h-full w-full flex flex-col items-top justify-top border-r border-base-300">

                    <!-- Title -->
                    <p class="pt-5 text-center mb-10 mt-0 text-4xl font-[Chango]">LYRICAL</p>

                    <!-- Image -->
                    <img src="{% static 'lyrical/image/singer-transparent.png' %}" 
                        alt="Singer performing"
                        class="object-contain mt-4 w-full [mask-image:linear-gradient(to_bottom,rgba(0,0,0,1)_85%,rgba(0,0,0,0)_100%)]">
                    
                    <!-- Menu -->                    
                    <ul class="menu bg-base-200 w-full mt-10 mb-4 menu-md pl-4 pr-4 font-bold">
                        <li class="mb-1">
                            <a class="{% if active_page == 'index' %}menu-active{% endif %}" href="{% url 'index' %}">
                                HOME
                            </a>
                        </li>
                        <li class="mb-1">
                            <a class="{% if active_page == 'library' %}menu-active{% endif %}" href="{% url 'library' %}">
                                LIBRARY
                            </a>
                        </li>
                        <li class="mb-1">
                            <a class="{% if active_page == 'names' %}menu-active{% endif %}" href="{% url 'names' %}">
                                NAMES
                            </a>
                        </li>
                        <li class="mb-1">
                            <a class="{% if active_page == 'edit' %}menu-active{% endif %}" href="{% url 'song' %}">
                                EDIT
                            </a>
                        </li>
                    </ul>

                    <!-- LLM Options -->
                    <div class="bg-base shadow rounded border border-base-300 bg-base flex flex-col mt-4 mb-2 ml-2 mr-2 pt-3">
                        <p class="text-sm font-bold border-b border-base-300 pb-3 text-center">
                            MODEL PARAMETERS
                        </p>
                        <div class="w-full p-4">
                            <select class="flex-grow select select-base">
                                {% for model in llm_models %}
                                    <option value="{{ model.id }}" {% if user.llm_model.id == model.id %}selected{% endif %}>
                                        {{ model.display_name }}
                                    </option>
                                {% endfor %}
                            </select>

                            <p class="text-xs ml-1 mb-1 mt-6">
                                TEMPERATURE:
                            </p>
                            <div class="w-full max-w-xs">
                                <input type="range" min="0" max="1" value="{{ user.llm_temperature }}" class="range range-primary" step="0.1" />
                                <div class="flex justify-between px-2.5 mt-2 text-xs">
                                    <span>|</span>
                                    <span>|</span>
                                    <span>|</span>
                                </div>
                                <div class="flex justify-between px-2.5 mt-2 text-xs">
                                    <span>0</span>
                                    <span>0.5</span>
                                    <span>1</span>
                                </div>
                            </div>

                            <p class="text-xs ml-1 mb-1 mt-6">
                                MAX TOKENS:
                            </p>
                            <div class="w-full max-w-xs">
                                <input type="range" min="1000" max="5000" value="{{ user.llm_max_tokens }}" class="range range-primary"/>
                                <div class="flex justify-between px-2.5 mt-2 text-xs">
                                    <span>|</span>
                                    <span>|</span>
                                    <span>|</span>
                                    <span>|</span>
                                    <span>|</span>
                                </div>
                                <div class="flex justify-between px-2.5 mt-2 text-xs">
                                    <span>1k</span>
                                    <span>2k</span>
                                    <span>3k</span>
                                    <span>4k</span>
                                    <span>5k</span>
                                </div>
                            </div>
                            <p class="text-xs ml-1 mb-1 mt-7">
                                COST PER 1M TOKENS:
                            </p>
                            <p class="text-2xl ml-1 font-bold text-primary">
                                ${{ user.llm_model.cost_per_1m_tokens|floatformat:2 }}
                            </p>
                        </div>
                    </div>

                    <!-- Expandable Space -->
                    <div class="flex-1">
                    </div>

                    <!-- Menu -->                    
                    <ul class="menu bg-base-200 w-full mt-10 mb-3 menu-md font-bold p-0">
                        <div class="mt-1 mb-3 border border-b border-1 border-base-300"></div>
                        <li class="mb-1 pl-6 pr-4">
                            <a class="{% if active_page == 'profile' %}menu-active{% endif %}" href="{% url 'profile' %}">
                                MY PROFILE
                            </a>
                        </li>
                        <li class="mb-1 pl-6 pr-4">
                            <a class="{% if active_page == 'logout' %}menu-active{% endif %}" href="{% url 'logout' %}">
                                LOGOUT
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Right content area: holds top bar and main page panels -->
        <div id="right-content-area" class="flex flex-col flex-1 overflow-hidden">

            <!-- Fixed height top bar -->
            <div id="top-bar-panel" class="h-16 flex-shrink-0 flex w-full mt-2">
                <div class="h-full w-full flex">

                    <!-- Top Bar Container -->
                    <div class="relative flex w-full h-full items-center">

                        <!-- Left Item: Song Title -->
                        <div class="text-left ml-3">
                            <p class="text-3xl font-bold">
                                {% if song_title %}{{song_title}}{% else %}{% endif %}
                            </p>
                        </div>

                        <!-- Middle Item: Page Navigation -->
                        {% if navigation %}
                        <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center mt-1">
                            <ul class="steps steps-primary w-250">
                                {% for page in navigation %}
                                    <li 
                                    id="navigation-{{ forloop.counter }}"
                                    class="step
                                    {% if page.active %}step-primary {% endif %}
                                    {% if page.selected %}font-bold text-md {% else %}text-sm {% endif %}
                                    {% if not page.enabled %}text-neutral {% endif %}">
                                        {% if page.enabled %}
                                            <a href="{% url page.url %}">{{page.name}}</a>
                                        {% else %}
                                            {{page.name}}
                                        {% endif %}
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                        {% elif page_name %}
                        <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center">
                            <p class="text-3xl font-bold">
                                {{ page_name }}
                            </p>
                        </div>
                        {% endif %}

                        <!-- Right Item: Close Button -->
                        <div class="flex-0 items-center mr-3 ml-auto">
                            <a href="{% url 'library' %}">
                                <button class="btn btn-lg btn-primary">X</button>
                            </a>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Container for main page panels and their splitters -->
            <div id="main-panels-container" class="flex flex-1 overflow-hidden">
                {% block page_content %}
                {% endblock %}
            </div>

            <!-- Fixed height footer -->
            <!--div id="footer-panel" class="h-8 flex-shrink-0 flex justify-center items-center overflow-hidden">
                <div class="h-full w-full flex items-center justify-center">
                    <div class="h-full w-full flex justify-left lm-2 border-t border-base-300 bg-base-200">
                        Footer
                    </div>
                </div>
            </div-->

        </div>
    </div>
{% endblock %}
