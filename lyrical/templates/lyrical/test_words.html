<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Marker Tool</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .text-line {
            margin-bottom: 8px;
            line-height: 1.2;
        }
        
        .word {
            display: inline;
            cursor: pointer;
            transition: background-color 0.2s ease;
            user-select: none;
        }
                
        .word:hover {
            background-color: #e0e0e0;
        }
        
        .word.marked {
            background-color: #ff4444;
            color: white;
        }
        
        .word.marked:hover {
            background-color: #cc3333;
        }
        
    </style>
</head>
<body>
    <div class="container">
        
        <div id="textContainer">
            <div class="text-line" data-line="0">
                <span class="word" data-index="0">The</span>
                <span class="word" data-index="1">quick</span>
                <span class="word" data-index="2">brown</span>
                <span class="word" data-index="3">fox</span>
                <span class="word" data-index="4">jumps</span>
                <span class="word" data-index="5">over</span>
                <span class="word" data-index="6">the</span>
                <span class="word" data-index="7">lazy</span>
                <span class="word" data-index="8">sleeping</span>
                <span class="word" data-index="9">dog</span>
            </div>
            
            <div class="text-line" data-line="1">
                <span class="word" data-index="10">Lorem</span>
                <span class="word" data-index="11">ipsum</span>
                <span class="word" data-index="12">dolor</span>
                <span class="word" data-index="13">sit</span>
                <span class="word" data-index="14">amet</span>
                <span class="word" data-index="15">consectetur</span>
                <span class="word" data-index="16">adipiscing</span>
                <span class="word" data-index="17">elit</span>
                <span class="word" data-index="18">sed</span>
                <span class="word" data-index="19">do</span>
            </div>
            
            <div class="text-line" data-line="2">
                <span class="word" data-index="20">Eiusmod</span>
                <span class="word" data-index="21">tempor</span>
                <span class="word" data-index="22">incididunt</span>
                <span class="word" data-index="23">ut</span>
                <span class="word" data-index="24">labore</span>
                <span class="word" data-index="25">et</span>
                <span class="word" data-index="26">dolore</span>
                <span class="word" data-index="27">magna</span>
                <span class="word" data-index="28">aliqua</span>
                <span class="word" data-index="29">enim</span>
            </div>
            
            <div class="text-line" data-line="3">
                <span class="word" data-index="30">Ad</span>
                <span class="word" data-index="31">minim</span>
                <span class="word" data-index="32">veniam</span>
                <span class="word" data-index="33">quis</span>
                <span class="word" data-index="34">nostrud</span>
                <span class="word" data-index="35">exercitation</span>
                <span class="word" data-index="36">ullamco</span>
                <span class="word" data-index="37">laboris</span>
                <span class="word" data-index="38">nisi</span>
                <span class="word" data-index="39">ut</span>
            </div>
        </div>
    </div>

    <script>
        let isDragging = false;
        let dragStartIndex = null;
        let markedWords = new Set();

        // Get all word elements
        const words = document.querySelectorAll('.word');

        // Add event listeners to each word
        words.forEach((word, index) => {
            // Mouse down - start potential drag
            word.addEventListener('mousedown', (e) => {
                e.preventDefault();
                isDragging = true;
                dragStartIndex = parseInt(word.dataset.index);
            });

            // Mouse enter - handle drag selection
            word.addEventListener('mouseenter', (e) => {
                if (isDragging && dragStartIndex !== null) {
                    const currentIndex = parseInt(word.dataset.index);
                    highlightRange(dragStartIndex, currentIndex);
                }
            });

            // Mouse up - complete action (click or drag)
            word.addEventListener('mouseup', (e) => {
                e.preventDefault();
                const currentIndex = parseInt(word.dataset.index);
                
                if (isDragging) {
                    if (dragStartIndex === currentIndex) {
                        // Single click - toggle word
                        toggleWord(currentIndex);
                    } else {
                        // Drag selection - mark range
                        markRange(dragStartIndex, currentIndex);
                    }
                }
                
                isDragging = false;
                dragStartIndex = null;
                clearHighlight();
            });
        });

        // Handle mouse up outside of words
        document.addEventListener('mouseup', () => {
            isDragging = false;
            dragStartIndex = null;
            clearHighlight();
        });

        // Prevent text selection during drag
        document.addEventListener('selectstart', (e) => {
            if (isDragging) {
                e.preventDefault();
            }
        });

        function toggleWord(index) {
            const word = document.querySelector(`[data-index="${index}"]`);
            if (markedWords.has(index)) {
                markedWords.delete(index);
                word.classList.remove('marked');
            } else {
                markedWords.add(index);
                word.classList.add('marked');
            }
        }

        function markRange(startIndex, endIndex) {
            const start = Math.min(startIndex, endIndex);
            const end = Math.max(startIndex, endIndex);
            
            for (let i = start; i <= end; i++) {
                markedWords.add(i);
                const word = document.querySelector(`[data-index="${i}"]`);
                word.classList.add('marked');
            }
        }

        function highlightRange(startIndex, endIndex) {
            // Clear previous highlights
            clearHighlight();
            
            const start = Math.min(startIndex, endIndex);
            const end = Math.max(startIndex, endIndex);
            
            for (let i = start; i <= end; i++) {
                const word = document.querySelector(`[data-index="${i}"]`);
                if (!markedWords.has(i)) {
                    word.style.backgroundColor = '#ff4444';
                }
            }
        }

        function clearHighlight() {
            words.forEach(word => {
                if (!word.classList.contains('marked')) {
                    word.style.backgroundColor = '';
                }
            });
        }
    </script>
</body>
</html>