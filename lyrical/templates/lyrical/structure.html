{% extends "lyrical/base_columns.html" %}
{% load static %}

{% block head %}
{% endblock %}

{% block page_content %}
    <c-modal-select />
    <div class="w-full min-h-screen flex flex-col items-center justify-top bg-base-200 p-4 m-8">
        <div class="card max-w-[90%] h-[85%] bg-base-100 shadow-xl p-6 flex flex-col">

            <!-- Title -->
            <h2 class="mb-6 text-3xl font-bold text-primary text-center flex-shrink-0">SONG STRUCTURE - {{song.name|upper}}</h2>

            <!-- Content Outer Border -->
            <div class="border-1 rounded border-base-300 flex flex-col flex-1">
                                
                <div class="border-b border-base-300 pt-1">
                    <!-- Right Header -->
                    <c-panel-header title="SETTINGS" padding="4">
                        <c-panel-header-button id="btn-load-from-template">
                            LOAD FROM TEMPLATE
                        </c-panel-header-button>
                        <c-panel-header-button id="btn-save-to-template" data-song-id="{{song.id}}">
                            SAVE TO TEMPLATE
                        </c-panel-header-button>
                        <c-panel-header-divider />
                        <c-panel-header-button id="btn-cancel">
                            CANCEL
                        </c-panel-header-button>
                        <c-panel-header-button id="btn-save" data-song-id="{{song.id}}">
                            SAVE
                        </c-panel-header-button>
                    </c-panel-header>
                    <!-- End: Right Header -->
                </div>

                <!-- Content -->
                <div class="flex flex-row h-full">

                    <!-- Left Panel (Settings Area) -->
                    <div class="flex flex-col flex-1 h-full w-[730px]">

                        <!-- Custom Request -->
                        <div class="flex flex-col flex-shrink-0 border-b border-base-300 h-35">
                            <textarea 
                                id="input-prompt-text" 
                                type="text" 
                                placeholder="add any custom request here..." 
                                autocomplete="off" 
                                class="input-control textarea text-[16px] textarea-neutral w-full h-full px-4 mb-1 resize-none border-none shadow-none focus:outline-none"
                            >{{custom_request}}</textarea>
                        </div>
                        <!-- End: Custom Request -->

                        <!-- Settings Controls -->
                        <table class="w-full">
                            <tr>
                                <td class="w-[50%] px-4 pt-4">
                                    <c-input-label>INTRO LINES:</c-input-label>
                                    <div class="w-full max-w-xs">
                                        <input id="input-intro-lines" type="range" min="3" max="15" value="{{average_syllables}}" class="range range-primary w-83" step="1"/>
                                        <div class="flex justify-between px-2.5 mt-2 text-xs w-84">
                                            <span>3</span>
                                            <span>6</span>
                                            <span>9</span>
                                            <span>12</span>
                                            <span>15</span>
                                        </div>
                                    </div>
                                </td>
                                <td class="w-[50%] px-4 pt-4">
                                    <c-input-label>OUTRO LINES:</c-input-label>
                                    <div class="w-full max-w-xs">
                                        <input id="input-outro-lines" type="range" min="3" max="15" value="{{average_syllables}}" class="range range-primary w-83" step="1"/>
                                        <div class="flex justify-between px-2.5 mt-2 text-xs w-84">
                                            <span>3</span>
                                            <span>6</span>
                                            <span>9</span>
                                            <span>12</span>
                                            <span>15</span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="w-[50%] px-4 pt-4">
                                    <c-input-label>VERSE COUNT:</c-input-label>
                                    <div class="w-full max-w-xs">
                                        <input id="input-verse-count" type="range" min="3" max="15" value="{{average_syllables}}" class="range range-primary w-83" step="1"/>
                                        <div class="flex justify-between px-2.5 mt-2 text-xs w-84">
                                            <span>3</span>
                                            <span>6</span>
                                            <span>9</span>
                                            <span>12</span>
                                            <span>15</span>
                                        </div>
                                    </div>
                                </td>
                                <td class="w-[50%] px-4 pt-4">
                                    <c-input-label>VERSE LINES:</c-input-label>
                                    <div class="w-full max-w-xs">
                                        <input id="input-verse-lines" type="range" min="3" max="15" value="{{average_syllables}}" class="range range-primary w-83" step="1"/>
                                        <div class="flex justify-between px-2.5 mt-2 text-xs w-84">
                                            <span>3</span>
                                            <span>6</span>
                                            <span>9</span>
                                            <span>12</span>
                                            <span>15</span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="w-[50%] px-4 pt-4">
                                    <c-input-label>PRE-CHORUS LINES:</c-input-label>
                                    <div class="w-full max-w-xs">
                                        <input id="input-pre-chorus-lines" type="range" min="3" max="15" value="{{average_syllables}}" class="range range-primary w-83" step="1"/>
                                        <div class="flex justify-between px-2.5 mt-2 text-xs w-84">
                                            <span>3</span>
                                            <span>6</span>
                                            <span>9</span>
                                            <span>12</span>
                                            <span>15</span>
                                        </div>
                                    </div>
                                </td>
                                <td class="w-[50%] px-4 pt-4">
                                    <c-input-label>CHORUS LINES:</c-input-label>
                                    <div class="w-full max-w-xs">
                                        <input id="input-chorus-lines" type="range" min="3" max="15" value="{{average_syllables}}" class="range range-primary w-83" step="1"/>
                                        <div class="flex justify-between px-2.5 mt-2 text-xs w-84">
                                            <span>3</span>
                                            <span>6</span>
                                            <span>9</span>
                                            <span>12</span>
                                            <span>15</span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="w-[50%] px-4 pt-4">
                                    <c-input-label>BRIDGE LINES:</c-input-label>
                                    <div class="w-full max-w-xs">
                                        <input id="input-bridge-lines" type="range" min="3" max="15" value="{{average_syllables}}" class="range range-primary w-83" step="1"/>
                                        <div class="flex justify-between px-2.5 mt-2 text-xs w-84">
                                            <span>3</span>
                                            <span>6</span>
                                            <span>9</span>
                                            <span>12</span>
                                            <span>15</span>
                                        </div>
                                    </div>
                                </td>
                                <td class="w-[50%] px-4 pt-4">
                                    <c-input-label>SYLLABLES PER LINE:</c-input-label>
                                    <div class="w-full max-w-xs">
                                        <input id="input-syllables-per-line" type="range" min="3" max="15" value="{{average_syllables}}" class="range range-primary w-83" step="1"/>
                                        <div class="flex justify-between px-2.5 mt-2 text-xs w-84">
                                            <span>3</span>
                                            <span>6</span>
                                            <span>9</span>
                                            <span>12</span>
                                            <span>15</span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="w-[50%] px-4 pt-4">
                                    <c-input-label>VOCALISATION LEVEL:</c-input-label>
                                    <div class="w-full max-w-xs">
                                        <input id="input-vocalisation-level" type="range" min="3" max="15" value="{{average_syllables}}" class="range range-primary w-83" step="1"/>
                                        <div class="flex justify-between px-2.5 mt-2 text-xs w-84">
                                            <span>3</span>
                                            <span>6</span>
                                            <span>9</span>
                                            <span>12</span>
                                            <span>15</span>
                                        </div>
                                    </div>
                                </td>
                                <td class="w-[50%] px-4 pt-4">
                                    <c-input-label>VOCALISATION LINES:</c-input-label>
                                    <div class="w-full max-w-xs">
                                        <input id="input-vocalisation-lines" type="range" min="3" max="15" value="{{average_syllables}}" class="range range-primary w-83" step="1"/>
                                        <div class="flex justify-between px-2.5 mt-2 text-xs w-84">
                                            <span>3</span>
                                            <span>6</span>
                                            <span>9</span>
                                            <span>12</span>
                                            <span>15</span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-4 pt-4" colspan="2">
                                    <c-input-label>VOCALISATION TERMS:</c-input-label>
                                    <input
                                        id="input-vocalisation-terms" 
                                        type="text" 
                                        placeholder="" 
                                        autocomplete="off" 
                                        class="input-control input input-md input-neutral w-[100%] border-base-300 shadow-none focus:outline-none" 
                                        value="{{vocalisation_terms}}"
                                    ></input>
                                </td>
                            </tr>
                        </table>

                            

                        <!-- End: Settings Controls -->

                    </div>
                    <!-- End: Left Panel (Settings Area) -->

                    <!-- Right Panel -->
                    <div class="flex flex-col border-l border-base-300 rounded-none w-[270px]">
                        <div class="w-[270px] min-w-0 flex flex-col h-full pt-1 pb-1">

                            <!-- Splitter Section (Clear) -->
                            <div class="flex flex-col flex-shrink-0">
                                <div class="card w-full bg-transparent flex flex-row cursor-row-resize font-bold text-md text-primary">
                                    <div class="flex flex-0 justify-end items-center flex-1">                
                                        <c-panel-header title="SONG SECTIONS" padding="4">
                                            <c-panel-header-button id="btn-clear" extrastyles="btn-disabled">
                                                CLEAR
                                            </c-panel-header-button>
                                        </c-panel-header>
                                    </div>
                                </div>
                            </div>
                            <!-- End: Splitter Section (Clear) -->

                            <!-- Fields for Edit Song Style -->
                            <div id="song-sections" class="mt-1 mx-1 card border border-base-300 bg-base-200 overflow-y-auto scrollbar-show" data-drop-zone="true">

                                <!-- Test Data -->
                                <c-badge-edit>INTRO</c-badge-edit>
                                <c-badge-edit>THEME</c-badge-edit>
                                <c-badge-edit>NARRATIVE</c-badge-edit>
                                <c-badge-edit>MOOD</c-badge-edit>
                                <c-badge-edit>HOOK</c-badge-edit>
                                <c-badge-edit>VERSE</c-badge-edit>
                                <c-badge-edit>PRE-CHORUS</c-badge-edit>
                                <c-badge-edit>CHORUS</c-badge-edit>
                                <c-badge-edit>BRIDGE</c-badge-edit>
                                <c-badge-edit>OUTRO</c-badge-edit>
                                <c-badge-edit>VOCALISATION</c-badge-edit>
                                <c-badge-edit>INTERLUDE</c-badge-edit>
                                <c-badge-edit>SOLO</c-badge-edit>
                                <!-- End: Test Data -->
                                
                                <!-- Add Item -->
                                <div id="song-sections-end">
                                    <div class="border-b border-neutral mt-2"></div>
                                    <button id="badge-add-item" class="badge badge-sm rounded badge-neutral w-40 font-bold mb-3 mt-4 ml-2 cursor-pointer">ADD ITEM</button>
                                </div>
                                <!-- End: Add Item -->

                            </div>
                            <!-- End: Fields for Edit Song Style -->

                        </div>
                    </div>
                    <!-- End: Right Panel -->

                </div>
                <!-- End: Content -->
            </div>     
            <!-- End: Content Outer Border -->

        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script type="module" src="{% static 'lyrical/script/page_structure.js' %}"></script>
{% endblock %}
