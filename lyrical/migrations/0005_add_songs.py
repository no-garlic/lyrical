# Generated by Django 5.2 on 2025-04-15 00:03

from django.db import migrations
import os


def add_data(apps, schema_editor):
    user = apps.get_model("lyrical", "User")
    song = apps.get_model("lyrical", "Song")
    messages = apps.get_model("lyrical", "Message")

    user = user.objects.get(username="mpetrou")
    llm = user.default_model
    workspace = user.workspaces.get(internal_name="default")

    song1 = song.objects.create(
        title="Song 1",
        theme="A song about love and loss.",
        lyrics="These are the lyrics for song 1.",
        workspace=workspace,
        llm=llm,
        llm_temperature=0.5
    )

    #messages.create(role="system", content="you are a song writer", llm=llm, song=song1)
    #messages.create(role="system", content="create a pop song about love and loss", llm=llm, song=song1)

    

    


def remove_data(apps, schema_editor):
    apps.get_model("lyrical", "Song").objects.all().delete()


class Migration(migrations.Migration):

    dependencies = [
        ("lyrical", "0004_add_llms"),
    ]

    operations = [
        migrations.RunPython(add_data, reverse_code=remove_data)
    ]
