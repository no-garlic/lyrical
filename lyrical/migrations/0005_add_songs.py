# Generated by Django 5.2 on 2025-04-15 00:03

from django.db import migrations
import os


def add_data(apps, schema_editor):
    user = apps.get_model("lyrical", "User")
    song = apps.get_model("lyrical", "Song")
    exclude_song_names = apps.get_model("lyrical", "ExcludeSongName")
    messages = apps.get_model("lyrical", "Message")

    user = user.objects.get(username="mpetrou")
    llm = user.default_model
    workspace = user.workspaces.get(internal_name="working")

    song1 = song.objects.create(
        title="I Create",
        theme="A song about being creative",
        lyrics="I Create, oh I Create!",
        workspace=workspace,
        llm=llm,
        llm_temperature=0.5
    )

    #messages.create(role="system", content="you are a song writer", llm=llm, song=song1)
    #messages.create(role="system", content="create a pop song about love and loss", llm=llm, song=song1)

    # The default song names to exclude
    exclude_song_names.objects.create(title="Finally Free")
    exclude_song_names.objects.create(title="Morning Glow")
    exclude_song_names.objects.create(title="From The Ashes")    

    


def remove_data(apps, schema_editor):
    #TODO
    pass


class Migration(migrations.Migration):

    dependencies = [
        ("lyrical", "0004_add_llms"),
    ]

    operations = [
        migrations.RunPython(add_data, reverse_code=remove_data)
    ]
